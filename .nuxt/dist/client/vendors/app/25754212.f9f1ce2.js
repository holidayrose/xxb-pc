(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{109:function(t,e,r){"use strict";r.d(e,"c",(function(){return I})),r.d(e,"b",(function(){return z})),r.d(e,"a",(function(){return j}));var n=r(70),o=r(91),l=r(185),h=r(232),d=r(35),c=r(96),_=r(201),f=r(31),v=r(1),y=r(435),w=r(219),x=r(46),m=new o.a(!0);function L(style){var t=style.stroke;return!(null==t||"none"===t||!(style.lineWidth>0))}function C(style){var t=style.fill;return null!=t&&"none"!==t}function k(t,style){if(null!=style.fillOpacity&&1!==style.fillOpacity){var e=t.globalAlpha;t.globalAlpha=style.fillOpacity*style.opacity,t.fill(),t.globalAlpha=e}else t.fill()}function B(t,style){if(null!=style.strokeOpacity&&1!==style.strokeOpacity){var e=t.globalAlpha;t.globalAlpha=style.strokeOpacity*style.opacity,t.stroke(),t.globalAlpha=e}else t.stroke()}function I(t,pattern,e){var image=Object(l.a)(pattern.image,pattern.__image,e);if(Object(l.c)(image)){var r=t.createPattern(image,pattern.repeat||"repeat");if("function"==typeof DOMMatrix&&r.setTransform){var n=new DOMMatrix;n.rotateSelf(0,0,(pattern.rotation||0)/Math.PI*180),n.scaleSelf(pattern.scaleX||1,pattern.scaleY||1),n.translateSelf(pattern.x||0,pattern.y||0),r.setTransform(n)}return r}}var S=["shadowBlur","shadowOffsetX","shadowOffsetY"],R=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function O(t,style,e,r,o){var l=!1;if(!r&&style===(e=e||{}))return!1;if(r||style.opacity!==e.opacity){l||(H(t,o),l=!0);var h=Math.max(Math.min(style.opacity,1),0);t.globalAlpha=isNaN(h)?n.b.opacity:h}(r||style.blend!==e.blend)&&(l||(H(t,o),l=!0),t.globalCompositeOperation=style.blend||n.b.blend);for(var i=0;i<S.length;i++){var d=S[i];(r||style[d]!==e[d])&&(l||(H(t,o),l=!0),t[d]=t.dpr*(style[d]||0))}return(r||style.shadowColor!==e.shadowColor)&&(l||(H(t,o),l=!0),t.shadowColor=style.shadowColor||n.b.shadowColor),l}function P(t,e,r,n,o){var style=T(e,o.inHover),l=n?null:r&&T(r,o.inHover)||{};if(style===l)return!1;var h=O(t,style,l,n,o);if((n||style.fill!==l.fill)&&(h||(H(t,o),h=!0),t.fillStyle=style.fill),(n||style.stroke!==l.stroke)&&(h||(H(t,o),h=!0),t.strokeStyle=style.stroke),(n||style.opacity!==l.opacity)&&(h||(H(t,o),h=!0),t.globalAlpha=null==style.opacity?1:style.opacity),e.hasStroke()){var d=style.lineWidth/(style.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1);t.lineWidth!==d&&(h||(H(t,o),h=!0),t.lineWidth=d)}for(var i=0;i<R.length;i++){var c=R[i],_=c[0];(n||style[_]!==l[_])&&(h||(H(t,o),h=!0),t[_]=style[_]||c[1])}return h}function D(t,e){var r=e.transform,n=t.dpr||1;r?t.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):t.setTransform(n,0,0,n,0,0)}function H(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function T(t,e){return e&&t.__hoverStyle||t.style}function z(t,e){j(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function j(t,e,r,n){var o=e.transform;if(!e.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1))return e.__dirty&=~x.a,void(e.__isRendered=!1);var S=e.__clipPaths,R=r.prevElClipPaths,z=!1,E=!1;if(R&&!Object(h.b)(S,R)||(R&&R.length&&(H(t,r),t.restore(),E=z=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),S&&S.length&&(H(t,r),t.save(),function(t,e,r){for(var n=!1,i=0;i<t.length;i++){var o=t[i];n=n||o.isZeroArea(),D(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}r.allClipped=n}(S,t,r),z=!0),r.prevElClipPaths=S),r.allClipped)e.__isRendered=!1;else{e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var M=r.prevEl;M||(E=z=!0);var W,A,N=e instanceof d.b&&e.autoBatch&&function(style){var t=C(style),e=L(style);return!(style.lineDash||!(+t^+e)||t&&"string"!=typeof style.fill||e&&"string"!=typeof style.stroke||style.strokePercent<1||style.strokeOpacity<1||style.fillOpacity<1)}(e.style);z||(W=o,A=M.transform,W&&A?W[0]!==A[0]||W[1]!==A[1]||W[2]!==A[2]||W[3]!==A[3]||W[4]!==A[4]||W[5]!==A[5]:W||A)?(H(t,r),D(t,e)):N||H(t,r);var style=T(e,r.inHover);e instanceof d.b?(1!==r.lastDrawType&&(E=!0,r.lastDrawType=1),P(t,e,M,E,r),N&&(r.batchFill||r.batchStroke)||t.beginPath(),function(t,e,style,r){var n=L(style),o=C(style),l=style.strokePercent,d=l<1,c=!e.path;e.silent&&!d||!c||e.createPathProxy();var path=e.path||m;if(!r){var _=style.fill,f=style.stroke,w=o&&!!_.colorStops,S=n&&!!f.colorStops,R=o&&!!_.image,O=n&&!!f.image,P=void 0,D=void 0,H=void 0,T=void 0,rect=void 0;(w||S)&&(rect=e.getBoundingRect()),w&&(P=e.__dirty?Object(h.a)(t,_,rect):e.__canvasFillGradient,e.__canvasFillGradient=P),S&&(D=e.__dirty?Object(h.a)(t,f,rect):e.__canvasStrokeGradient,e.__canvasStrokeGradient=D),R&&(H=e.__dirty||!e.__canvasFillPattern?I(t,_,e):e.__canvasFillPattern,e.__canvasFillPattern=H),O&&(T=e.__dirty||!e.__canvasStrokePattern?I(t,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=H),w?t.fillStyle=P:R&&(H?t.fillStyle=H:o=!1),S?t.strokeStyle=D:O&&(T?t.strokeStyle=T:n=!1)}var z=style.lineDash&&style.lineWidth>0&&Object(y.a)(style.lineDash,style.lineWidth),j=style.lineDashOffset,E=!!t.setLineDash,M=e.getGlobalScale();if(path.setScale(M[0],M[1],e.segmentIgnoreThreshold),z){var W=style.strokeNoScale&&e.getLineScale?e.getLineScale():1;W&&1!==W&&(z=Object(v.map)(z,(function(t){return t/W})),j/=W)}var A=!0;(c||e.__dirty&x.b||z&&!E&&n)&&(path.setDPR(t.dpr),d?path.setContext(null):(path.setContext(t),A=!1),path.reset(),z&&!E&&(path.setLineDash(z),path.setLineDashOffset(j)),e.buildPath(path,e.shape,r),path.toStatic(),e.pathUpdated()),A&&path.rebuildPath(t,d?l:1),z&&E&&(t.setLineDash(z),t.lineDashOffset=j),r||(style.strokeFirst?(n&&B(t,style),o&&k(t,style)):(o&&k(t,style),n&&B(t,style))),z&&E&&t.setLineDash([])}(t,e,style,N),N&&(r.batchFill=style.fill||"",r.batchStroke=style.stroke||"")):e instanceof _.a?(3!==r.lastDrawType&&(E=!0,r.lastDrawType=3),P(t,e,M,E,r),function(t,e,style){var text=style.text;if(null!=text&&(text+=""),text){t.font=style.font||f.a,t.textAlign=style.textAlign,t.textBaseline=style.textBaseline;var r=void 0;if(t.setLineDash){var n=style.lineDash&&style.lineWidth>0&&Object(y.a)(style.lineDash,style.lineWidth),o=style.lineDashOffset;if(n){var l=style.strokeNoScale&&e.getLineScale?e.getLineScale():1;l&&1!==l&&(n=Object(v.map)(n,(function(t){return t/l})),o/=l),t.setLineDash(n),t.lineDashOffset=o,r=!0}}style.strokeFirst?(L(style)&&t.strokeText(text,style.x,style.y),C(style)&&t.fillText(text,style.x,style.y)):(C(style)&&t.fillText(text,style.x,style.y),L(style)&&t.strokeText(text,style.x,style.y)),r&&t.setLineDash([])}}(t,e,style)):e instanceof c.a?(2!==r.lastDrawType&&(E=!0,r.lastDrawType=2),function(t,e,r,n,o){O(t,T(e,o.inHover),r&&T(r,o.inHover),n,o)}(t,e,M,E,r),function(t,e,style){var image=e.__image=Object(l.a)(style.image,e.__image,e,e.onload);if(image&&Object(l.c)(image)){var r=style.x||0,n=style.y||0,o=e.getWidth(),h=e.getHeight(),d=image.width/image.height;if(null==o&&null!=h?o=h*d:null==h&&null!=o?h=o/d:null==o&&null==h&&(o=image.width,h=image.height),style.sWidth&&style.sHeight){var c=style.sx||0,_=style.sy||0;t.drawImage(image,c,_,style.sWidth,style.sHeight,r,n,o,h)}else if(style.sx&&style.sy){var f=o-(c=style.sx),v=h-(_=style.sy);t.drawImage(image,c,_,f,v,r,n,o,h)}else t.drawImage(image,r,n,o,h)}}(t,e,style)):e instanceof w.a&&(4!==r.lastDrawType&&(E=!0,r.lastDrawType=4),function(t,e,r){var n=e.getDisplayables(),o=e.getTemporalDisplayables();t.save();var i,l,h={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover};for(i=e.getCursor(),l=n.length;i<l;i++){(_=n[i]).beforeBrush&&_.beforeBrush(),_.innerBeforeBrush(),j(t,_,h,i===l-1),_.innerAfterBrush(),_.afterBrush&&_.afterBrush(),h.prevEl=_}for(var d=0,c=o.length;d<c;d++){var _;(_=o[d]).beforeBrush&&_.beforeBrush(),_.innerBeforeBrush(),j(t,_,h,d===c-1),_.innerAfterBrush(),_.afterBrush&&_.afterBrush(),h.prevEl=_}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}(t,e,r)),N&&n&&H(t,r),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),r.prevEl=e,e.__dirty=0,e.__isRendered=!0}}},232:function(t,e,r){"use strict";function n(t,e,rect){for(var r="radial"===e.type?function(t,e,rect){var r=rect.width,n=rect.height,o=Math.min(r,n),l=null==e.x?.5:e.x,h=null==e.y?.5:e.y,d=null==e.r?.5:e.r;return e.global||(l=l*r+rect.x,h=h*n+rect.y,d*=o),t.createRadialGradient(l,h,0,l,h,d)}(t,e,rect):function(t,e,rect){var r=null==e.x?0:e.x,n=null==e.x2?1:e.x2,o=null==e.y?0:e.y,l=null==e.y2?0:e.y2;return e.global||(r=r*rect.width+rect.x,n=n*rect.width+rect.x,o=o*rect.height+rect.y,l=l*rect.height+rect.y),r=isNaN(r)?0:r,n=isNaN(n)?1:n,o=isNaN(o)?0:o,l=isNaN(l)?0:l,t.createLinearGradient(r,o,n,l)}(t,e,rect),n=e.colorStops,i=0;i<n.length;i++)r.addColorStop(n[i].offset,n[i].color);return r}function o(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0;return!1}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}))},641:function(t,e,r){"use strict";var n=r(66),o=r(1),l=r(6),h=r(81),d=r(232),c=r(109),_=r(26),f=r(46);function v(){return!1}function y(t,e,r){var n=o.createCanvas(),l=e.getWidth(),h=e.getHeight(),d=n.style;return d&&(d.position="absolute",d.left="0",d.top="0",d.width=l+"px",d.height=h+"px",n.setAttribute("data-zr-dom-id",t)),n.width=l*r,n.height=h*r,n}var w=function(t){function e(e,r,l){var h,d=t.call(this)||this;d.motionBlur=!1,d.lastFrameAlpha=.7,d.dpr=1,d.virtual=!1,d.config={},d.incremental=!1,d.zlevel=0,d.maxRepaintRectCount=5,d.__dirty=!0,d.__firstTimePaint=!0,d.__used=!1,d.__drawIndex=0,d.__startIndex=0,d.__endIndex=0,d.__prevStartIndex=null,d.__prevEndIndex=null,l=l||n.e,"string"==typeof e?h=y(e,r,l):o.isObject(e)&&(e=(h=e).id),d.id=e,d.dom=h;var c=h.style;return c&&(h.onselectstart=v,c.webkitUserSelect="none",c.userSelect="none",c.webkitTapHighlightColor="rgba(0,0,0,0)",c["-webkit-touch-callout"]="none",c.padding="0",c.margin="0",c.borderWidth="0"),d.domBack=null,d.ctxBack=null,d.painter=r,d.config=null,d.dpr=l,d}return Object(l.a)(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=y("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,r,n){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o,l=[],h=this.maxRepaintRectCount,d=!1,c=new _.a(0,0,0,0);function v(rect){if(rect.isFinite()&&!rect.isZero())if(0===l.length){(t=new _.a(0,0,0,0)).copy(rect),l.push(t)}else{for(var t,e=!1,r=1/0,n=0,i=0;i<l.length;++i){var o=l[i];if(o.intersect(rect)){var f=new _.a(0,0,0,0);f.copy(o),f.union(rect),l[i]=f,e=!0;break}if(d){c.copy(rect),c.union(o);var v=rect.width*rect.height,y=o.width*o.height,w=c.width*c.height-v-y;w<r&&(r=w,n=i)}}if(d&&(l[n].union(rect),e=!0),!e)(t=new _.a(0,0,0,0)).copy(rect),l.push(t);d||(d=l.length>=h)}}for(var i=this.__startIndex;i<this.__endIndex;++i){if(x=t[i]){var y=x.shouldBePainted(r,n,!0,!0);(m=x.__isRendered&&(x.__dirty&f.a||!y)?x.getPrevPaintRect():null)&&v(m);var w=y&&(x.__dirty&f.a||!x.__isRendered)?x.getPaintRect():null;w&&v(w)}}for(i=this.__prevStartIndex;i<this.__prevEndIndex;++i){var x,m;y=(x=e[i]).shouldBePainted(r,n,!0,!0);if(x&&(!y||!x.__zr)&&x.__isRendered)(m=x.getPrevPaintRect())&&v(m)}do{o=!1;for(i=0;i<l.length;)if(l[i].isZero())l.splice(i,1);else{for(var L=i+1;L<l.length;)l[i].intersect(l[L])?(o=!0,l[i].union(l[L]),l.splice(L,1)):L++;i++}}while(o);return this._paintRects=l,l},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var r=this.dpr,n=this.dom,o=n.style,l=this.domBack;o&&(o.width=t+"px",o.height=e+"px"),n.width=t*r,n.height=e*r,l&&(l.width=t*r,l.height=e*r,1!==r&&this.ctxBack.scale(r,r))},e.prototype.clear=function(t,e,r){var n=this.dom,l=this.ctx,h=n.width,_=n.height;e=e||this.clearColor;var f=this.motionBlur&&!t,v=this.lastFrameAlpha,y=this.dpr,w=this;f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,h/y,_/y));var x=this.domBack;function m(t,r,n,h){if(l.clearRect(t,r,n,h),e&&"transparent"!==e){var _=void 0;o.isGradientObject(e)?(_=e.__canvasGradient||Object(d.a)(l,e,{x:0,y:0,width:n,height:h}),e.__canvasGradient=_):o.isImagePatternObject(e)&&(_=Object(c.c)(l,e,{dirty:function(){w.setUnpainted(),w.__painter.refresh()}})),l.save(),l.fillStyle=_||e,l.fillRect(t,r,n,h),l.restore()}f&&(l.save(),l.globalAlpha=v,l.drawImage(x,t,r,n,h),l.restore())}!r||f?m(0,0,h,_):r.length&&o.each(r,(function(rect){m(rect.x*y,rect.y*y,rect.width*y,rect.height*y)}))},e}(h.a),x=r(267),m=r(96),L=r(32),C=1e5,k=314159,B=.01;function I(t){return parseInt(t,10)}var S=function(){function t(t,e,r,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var h=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=r=o.extend({},r||{}),this.dpr=r.devicePixelRatio||n.e,this._singleCanvas=h,this.root=t;var d=t.style;d&&(d.webkitTapHighlightColor="transparent",d.webkitUserSelect="none",d.userSelect="none",d["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var c=this._zlevelList;this._prevDisplayList=[];var _=this._layers;if(h){var f=t,v=f.width,y=f.height;null!=r.width&&(v=r.width),null!=r.height&&(y=r.height),this.dpr=r.devicePixelRatio||1,f.width=v*this.dpr,f.height=y*this.dpr,this._width=v,this._height=y;var x=new w(f,this,this.dpr);x.__builtin__=!0,x.initContext(),_[314159]=x,x.zlevel=k,c.push(k),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var m=this._domRoot=function(t,e){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}(this._width,this._height);t.appendChild(m)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),r=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,r,t,this._redrawId);for(var i=0;i<n.length;i++){var o=n[i],l=this._layers[o];if(!l.__builtin__&&l.refresh){var h=0===i?this._backgroundColor:null;l.refresh(h)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,r=this._hoverlayer;if(r&&r.clear(),e){for(var n,o={inHover:!0,viewWidth:this._width,viewHeight:this._height},i=0;i<e;i++){var l=t[i];l.__inHover&&(r||(r=this._hoverlayer=this.getLayer(C)),n||(n=r.ctx).save(),Object(c.a)(n,l,o,i===e-1))}n&&n.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(C)},t.prototype.paintOne=function(t,e){Object(c.b)(t,e)},t.prototype._paintList=function(t,e,r,n){if(this._redrawId===n){r=r||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,e,r),l=o.finished,h=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),h&&this._paintHoverList(t),l)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var d=this;Object(x.a)((function(){d._paintList(t,e,r,n)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(k).ctx,e=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,e,r),this.eachBuiltinLayer((function(n){n.virtual&&t.drawImage(n.dom,0,0,e,r)}))},t.prototype._doPaintList=function(t,e,r){for(var n=this,l=[],h=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var c=this._zlevelList[d],_=this._layers[c];_.__builtin__&&_!==this._hoverlayer&&(_.__dirty||r)&&l.push(_)}for(var f=!0,v=!1,y=function(o){var i,d=l[o],c=d.ctx,_=h&&d.createRepaintRects(t,e,w._width,w._height),y=r?d.__startIndex:d.__drawIndex,x=!r&&d.incremental&&Date.now,m=x&&Date.now(),L=d.zlevel===w._zlevelList[0]?w._backgroundColor:null;if(d.__startIndex===d.__endIndex)d.clear(!1,L,_);else if(y===d.__startIndex){var C=t[y];C.incremental&&C.notClear&&!r||d.clear(!1,L,_)}-1===y&&(console.error("For some unknown reason. drawIndex is -1"),y=d.__startIndex);var k=function(e){var r={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(i=y;i<d.__endIndex;i++){var o=t[i];if(o.__inHover&&(v=!0),n._doPaintEl(o,d,h,e,r,i===d.__endIndex-1),x)if(Date.now()-m>15)break}r.prevElClipPaths&&c.restore()};if(_)if(0===_.length)i=d.__endIndex;else for(var B=w.dpr,I=0;I<_.length;++I){var rect=_[I];c.save(),c.beginPath(),c.rect(rect.x*B,rect.y*B,rect.width*B,rect.height*B),c.clip(),k(rect),c.restore()}else c.save(),k(),c.restore();d.__drawIndex=i,d.__drawIndex<d.__endIndex&&(f=!1)},w=this,x=0;x<l.length;x++)y(x);return L.a.wxa&&o.each(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:f,needsRefreshHover:v}},t.prototype._doPaintEl=function(t,e,r,n,o,l){var h=e.ctx;if(r){var d=t.getPaintRect();(!n||d&&d.intersect(n))&&(Object(c.a)(h,t,o,l),t.setPrevPaintRect(d))}else Object(c.a)(h,t,o,l)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=k);var r=this._layers[t];return r||((r=new w("zr_"+t,this,this.dpr)).zlevel=t,r.__builtin__=!0,this._layerConfig[t]?o.merge(r,this._layerConfig[t],!0):this._layerConfig[t-B]&&o.merge(r,this._layerConfig[t-B],!0),e&&(r.virtual=e),this.insertLayer(t,r),r.initContext()),r},t.prototype.insertLayer=function(t,e){var r=this._layers,n=this._zlevelList,l=n.length,h=this._domRoot,d=null,i=-1;if(r[t])o.logError("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(l>0&&t>n[0]){for(i=0;i<l-1&&!(n[i]<t&&n[i+1]>t);i++);d=r[n[i]]}if(n.splice(i+1,0,t),r[t]=e,!e.virtual)if(d){var c=d.dom;c.nextSibling?h.insertBefore(e.dom,c.nextSibling):h.appendChild(e.dom)}else h.firstChild?h.insertBefore(e.dom,h.firstChild):h.appendChild(e.dom);e.__painter=this}else o.logError("Layer of zlevel "+t+" is not valid")},t.prototype.eachLayer=function(t,e){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i];t.call(e,this._layers[n],n)}},t.prototype.eachBuiltinLayer=function(t,e){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i],o=this._layers[n];o.__builtin__&&t.call(e,o,n)}},t.prototype.eachOtherLayer=function(t,e){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i],o=this._layers[n];o.__builtin__||t.call(e,o,n)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){l&&(l.__endIndex!==t&&(l.__dirty=!0),l.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var r=1;r<t.length;r++){if((d=t[r]).zlevel!==t[r-1].zlevel||d.incremental){this._needsManuallyCompositing=!0;break}}var n,i,l=null,h=0;for(i=0;i<t.length;i++){var d,c=(d=t[i]).zlevel,_=void 0;n!==c&&(n=c,h=0),d.incremental?((_=this.getLayer(c+.001,this._needsManuallyCompositing)).incremental=!0,h=1):_=this.getLayer(c+(h>0?B:0),this._needsManuallyCompositing),_.__builtin__||o.logError("ZLevel "+c+" has been used by unkown layer "+_.id),_!==l&&(_.__used=!0,_.__startIndex!==i&&(_.__dirty=!0),_.__startIndex=i,_.incremental?_.__drawIndex=-1:_.__drawIndex=i,e(i),l=_),d.__dirty&f.a&&!d.__inHover&&(_.__dirty=!0,_.incremental&&_.__drawIndex<0&&(_.__drawIndex=i))}e(i),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,o.each(this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var r=this._layerConfig;r[t]?o.merge(r[t],e,!0):r[t]=e;for(var i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i];if(n===t||n===t+B){var l=this._layers[n];o.merge(l,r[t],!0)}}}},t.prototype.delLayer=function(t){var e=this._layers,r=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],r.splice(o.indexOf(r,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts;if(null!=t&&(n.width=t),null!=e&&(n.height=e),t=this._getSize(0),e=this._getSize(1),r.style.display="",this._width!==t||e!==this._height){for(var o in r.style.width=t+"px",r.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(k).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new w("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var r=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,o=e.dom.height;this.eachLayer((function(t){t.__builtin__?r.drawImage(t.dom,0,0,n,o):t.renderToCanvas&&(r.save(),t.renderToCanvas(r),r.restore())}))}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},h=this.storage.getDisplayList(!0),i=0,d=h.length;i<d;i++){var _=h[i];Object(c.a)(r,_,l,i===d-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,r=["width","height"][t],n=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(null!=e[r]&&"auto"!==e[r])return parseFloat(e[r]);var h=this.root,d=document.defaultView.getComputedStyle(h);return(h[n]||I(d[r])||I(h.style[r]))-(I(d[o])||0)-(I(d[l])||0)|0},t.prototype.pathToImage=function(path,t){t=t||this.dpr;var canvas=document.createElement("canvas"),e=canvas.getContext("2d"),rect=path.getBoundingRect(),style=path.style,r=style.shadowBlur*t,n=style.shadowOffsetX*t,l=style.shadowOffsetY*t,h=path.hasStroke()?style.lineWidth:0,d=Math.max(h/2,-n+r),_=Math.max(h/2,n+r),f=Math.max(h/2,-l+r),v=Math.max(h/2,l+r),y=rect.width+d+_,w=rect.height+f+v;canvas.width=y*t,canvas.height=w*t,e.scale(t,t),e.clearRect(0,0,y,w),e.dpr=t;var x={x:path.x,y:path.y,scaleX:path.scaleX,scaleY:path.scaleY,rotation:path.rotation,originX:path.originX,originY:path.originY};path.x=d-rect.x,path.y=f-rect.y,path.rotation=0,path.scaleX=1,path.scaleY=1,path.updateTransform(),path&&Object(c.a)(e,path,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var L=new m.a({style:{x:0,y:0,image:canvas}});return o.extend(path,x),L},t}();e.a=S}}]);